---
title: ""  
author: "`r rworkflows::use_badges(add_actions=c('rworkflows','rworkflows_static'))`" 
date: "<h4>README updated: <i>`r format( Sys.Date(), '%b-%d-%Y')`</i></h4>"
output:
  github_document
---

```{r setup}
pkg <- read.dcf("DESCRIPTION", fields = "Package")[1]
```


## Intro

[*GitHub Actions*](https://docs.github.com/en/actions) 
are a powerful way to automatically launch workflows 
every time you push changes to a GitHub repository. 
This is a form of [*Continuous Integration (CI)*](https://docs.github.com/en/actions/automating-builds-and-tests/about-continuous-integration),
which helps ensure that your code is always working as expected 
(without having to manually check each time).

Here, we have designed a robust, reusable, and flexible *action* 
specifically for the development of R packages. 
We also provide an R function to automatically generate a *workflow file* that 
calls the `rworkflows` composite action:

Currently, `rworkflows` *action* performs the following tasks:  

1. Builds a Docker container to run subsequent steps within. 
2. Builds and checks your R package (with CRAN and/or Bioconductor checks).  
3. Runs units tests.  
4. Runs code coverage tests and uploads the results 
to [*Codecov*](https://about.codecov.io/).  
5. (Re)builds and launches a documentation website for your R package.  
6. Pushes an [*Rstudio*](https://posit.co/) 
[*Docker*](https://www.docker.com/) container to 
[*DockerHub*](https://hub.docker.com/) 
with your R package and all its dependencies pre-installed.  

Importantly, these *workflow files* and *action* are 
designed to work with any R package out-of-the-box.
This means you won't have to manually edit any yaml files, just run the `rworkflows::use_workflow()` function and you're ready to go!

## Quickstart

Install and create the workflow in your R package's project folder.
```R
## in R
if(!require("rworkflows")) remotes::install_github("neurogenomics/rworkflows")
path <- rworkflows::use_workflow()
```
Push to GitHub, and let everything else run automatically!
```bash
## in the Terminal
git add .
git commit -m "Added GHA workflow via rworkflows::use_workflow()"
git push
```

## Documentation

### [Get started](https://neurogenomics.github.io/rworkflows/articles/rworkflows.html)

Introductory tutorial for using `rworkflows`.

### [Docker/Singularity](https://neurogenomics.github.io/rworkflows/articles/docker)

Copy-and-paste instructions for creating a *Docker* or *Singularity* container
with the `rworkflows` R package pre-installed.

### [Dependency graph](https://neurogenomics.github.io/rworkflows/articles/depgraph)

Interactive graph showing all the GitHub repos that currently use 
the `rworkflows` action.

## Citation 

If you use ``r pkg``, please cite: 

<!-- Modify this by editing the file: inst/CITATION  -->
> `r utils::citation(pkg)$textVersion`

## Acknowledgments

`rworkflows` builds upon the work of many others, especially the following:

<details>
  
### [`biocthis`](https://github.com/lcolladotor/biocthis)

This workflow is derived from the workflow generated by the 
[`use_bioc_github_action()`](https://lcolladotor.github.io/biocthis/articles/biocthis.html) function within the 
[`biothis`](http://www.bioconductor.org/packages/release/bioc/html/biocthis.html) 
package. 

#### Key changes in `rworkflows` 

- Uses dynamic variables to specify R/Bioconductor versions 
(e.g. `r: "latest"`) and the name of your R package, as opposed to static 
names that are likely to become outdated (e.g. `r: "4.0.1"`).  
- Additional error handling and dependencies checks.  
- Re-renders `README.Rmd` before rebuilding the documentation website.  

### [`github-pages-deploy-action`](https://github.com/JamesIves/github-pages-deploy-action)

Builds and deploys the GitHub Pages documentation website
in the `rworkflows` GHA workflows.

### [`bioconductor_docker`](https://github.com/Bioconductor/bioconductor_docker)

Uses the official 
[`bioconductor/bioconductor_docker`](https://github.com/Bioconductor/bioconductor_docker)
Docker container.  

**NOTE**: The `bioconductor/bioconductor_docker` container often lags behind the
actual Bioconductor releases. This means that sometimes "devel" in `Bioconductor/bioconductor_docker` is actually referring to the "release" 
version of Bioconductor. See this [Issue](https://github.com/Bioconductor/bioconductor_docker/issues/37) 
for details. 

### [`scFlow`](https://github.com/combiz/scFlow)

This DockerFile was partly adapted from the [scFlow Dockerfile](https://github.com/combiz/scFlow/blob/master/Dockerfile).

Unlike other Dockerfiles, this one
**does not require any manual editing when applying to different R packages**. 
This means that users who are unfamiliar with Docker do not have to troubleshoot
making this file correctly. It also means that it will continue to work 
even if your R package dependencies change. 

### [`act`](https://github.com/nektos/act)

A very useful command line tool for testing *GitHub Actions* locally. 

</details> 

# Session Info  

<details>

```{r}
utils::sessionInfo()
```

</details>

